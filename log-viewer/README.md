# Log Viewer

A Streamlit-based web UI for visualizing and analyzing logs from the Cultural Agents Supervisor system.

## Features

### ðŸ“Š Supervisor Runs
- View all supervisor runs with start/end times and duration
- See which nodes were executed (component_b, component_c, scheduler, executor)
- Track agents involved in each run
- View triggers detected and actions selected
- Analyze LLM interactions with model, input prompts, and outputs

### ðŸ¤– Agents
- View all active agents with full metadata
- Agent cards showing:
  - Agent type (Active ðŸŸ¢, Chaos ðŸ”´, Off Radar ðŸ‘¤)
  - Phone number, occupation, nationality, city
  - Activity stats (logs, runs, messages sent)
- Detailed agent profiles with:
  - Identity information
  - Agent goal and persona style
  - All messages sent with metadata (trigger, action type, group, date)
  - LLM interactions per agent

### ðŸ‘¥ Groups
- View all Telegram groups with activity
- Group statistics (messages analyzed, runs, agents active)
- Group topic and member information

## Installation

1. Install dependencies:
```bash
pip install -r requirements.txt
```

2. Ensure log exports exist in `../langgraph/logs/exports/` with files named `logs_YYYY-MM-DD.json`

## Usage

Run the Streamlit app:
```bash
streamlit run app.py
```

The app will open in your browser at `http://localhost:8501`

## Date Filtering

- Select a specific date range using the sidebar
- Use "All Time" option to view all available logs
- Available dates are automatically detected from export files

## Log Export Format

The viewer expects JSON log files with the following structure:
```json
{
  "logs": [
    {
      "start_timestamp": "2026-01-04T15:25:32.895627Z",
      "end_timestamp": "2026-01-04T15:25:32.895627Z",
      "message": "Log message",
      "level": 9,
      "attributes": {
        "state": {
          "selected_persona": {...},
          "agent_type": "chaos",
          "agent_goal": "...",
          "group_metadata": {...}
        }
      }
    }
  ],
  "export_metadata": {...}
}
```

## Project Structure

```
log-viewer/
â”œâ”€â”€ app.py              # Main Streamlit application
â”œâ”€â”€ requirements.txt    # Python dependencies
â”œâ”€â”€ README.md          # This file
â””â”€â”€ utils/
    â”œâ”€â”€ __init__.py
    â””â”€â”€ data_loader.py  # Log parsing and indexing logic
```

## Dependencies

- `streamlit` - Web UI framework
- `pandas` - Data manipulation (optional, for future enhancements)

## Related

- Log exports are generated by `../langgraph/logs/logfire_export.py`
- Logs are collected via Logfire from the supervisor and agent graphs
